{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}

    <form method="POST">
        {{ appverforms.app }}
        {{ appverforms.version }}
    </form>
    <script>
        let app_select = document.getElementById('app');
        let version_select = document.getElementById('version');

        app_select.onchange = function() {
            app = app_select.value;
            
            fetch('/version_check/version/' + app).then(function(response) {
                response.json().then(function(data) {
                    let optionHTML = ''; 
                    for (let version of data.versions) {
                        optionHTML += '<option value="' + version.id + '">' + version.key + '</option>';
                    }

                    version_select.innerHTML = optionHTML;

                });
            });
        }
    </script>
{% endblock %}